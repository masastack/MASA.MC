@inherits AdminCompontentBase
<div @ref="Ref">
    <SheetDialog Value="@_visible" ValueChanged="HandleVisibleChanged" Title="@T("Permission.CreateMessageTemplate")">
        <MForm Model="_model" EnableValidation @ref="_form">
            <div class="sheet-dialog full-height flex-column">
                <div class="pt-6 flex-height-auto overflow-y">
                    <MRow Justify="@("center")">
                        <MCol Cols="12" Sm="6" Md="3">
                            <MTextField Class="mx-auto" style="width:200px;" @bind-Value="_model.DisplayName" Placeholder="@T("DisplayName.MessageTemplateDisplayName")" TValue="string"></MTextField>
                        </MCol>
                    </MRow>
                    <MRow>
                        <MCol Cols="3">
                            <MSelect Value="@_channelType"
                                     Items="@(GetEnumList<ChannelTypes>())"
                                     Label="@T("DisplayName.ChannelType")"
                                     ItemText="item => T(item.ToString())"
                                     ItemValue="item => item"
                                     Outlined
                                     Disabled
                                     HideDetails="@("auto")"
                                     TItem="ChannelTypes"
                                     TItemValue="ChannelTypes"
                                     TValue="ChannelTypes"
                                     ValueChanged="HandleSelectChannelTypeAsync">
                            </MSelect>
                        </MCol>
                        <MCol Cols="3">
                            <MSelect @bind-Value="_model.ChannelId"
                                     Items="@_channelItems"
                                     Label="@T("DisplayName.Channel")"
                                     ItemText="item => item.DisplayName"
                                     ItemValue="item => item.Id"
                                     Outlined
                                     HideDetails="@("auto")">
                            </MSelect>
                        </MCol>
                    </MRow>
                    <MRow>
                        <MCol Cols="12">
                            <MTextField @bind-Value="_model.Title"
                                        Label="@T("DisplayName.MessageTemplateTitle")"
                                        Outlined
                                        HideDetails="@("auto")">
                            </MTextField>
                        </MCol>
                    </MRow>
                    <MRow>
                        <MCol Cols="12">
                            <DefaultMarkdown @bind-Value="_model.Content"></DefaultMarkdown>
                            <MInput @bind-Value="_model.Content" />
                        </MCol>
                    </MRow>
                    <MRow Class="mx-1 pt-6">
                        <MCheckbox Class="mt-1" @bind-Value="_model.IsJump" Label="@T("DisplayName.MessageTemplateIsJump")"></MCheckbox>
                        <MTextField @bind-Value="_model.JumpUrl"
                                    Class="ml-4"
                                    Label="@T("DisplayName.MessageTemplateJumpUrl")"
                                    Outlined
                                    HideDetails="@("auto")" />
                    </MRow>
                    <MRow>
                        <MCol Cols="12">
                            <div class="mt-3 d-flex align-center justify-start">
                                <span class="text-caption mr-2">@T("Description.MessageTemplate.PerDayLimit.Tips") </span>
                                <div style="width:100px;">
                                    <MTextField @bind-Value="_model.PerDayLimit"
                                                Type="number"
                                                Outlined
                                                HideDetails="@("auto")"></MTextField>
                                </div>
                                <span class="text-caption ml-2">@T("Unit.Bar") </span>
                            </div>
                        </MCol>
                    </MRow>
                </div>
                <div Class="d-flex pt-6">
                    <MSpacer></MSpacer>
                    <MButton Color="primary" Class="small-button" OnClick="async() => await HandleOkAsync()">@T("Submit")</MButton>
                </div>
            </div>
        </MForm>
    </SheetDialog>
</div>
