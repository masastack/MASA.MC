@inherits AdminCompontentBase
@page "/receiverGroups/receiverGroupManagement"

<PageTitle>@T("Permission.ReceiverGroupManagement")</PageTitle>

<div style="height:40px">
    <div class="d-flex" style="float: right;">
        <DefaultSearch @bind-Value="_queryParam.Filter" Clearable Class="rounded-2 search" Placeholder="@T("Search")" Dense OnEnter="RefreshAsync" OnClearClick="HandleClearAsync" />
        <MButton Color="primary" Class="ml-6 rounded-lg px-9 btn" OnClick="()=> _createModal.OpenModalAsync()">
            <span>@T("Permission.CreateReceiverGroup")</span>
        </MButton>
    </div>
</div>

<MCard>
    <MDataTable Headers="Headers" Items="_entities.Result" TItem="ReceiverGroupDto" ItemsPerPage="_queryParam.PageSize" HideDefaultFooter Class="mt-6">
        <HeaderColContent Context="header">
            <span class="text-btn">@header.Text</span>
        </HeaderColContent>
        <ItemColContent>
            @switch (context.Header.Value)
            {
                case (nameof(ReceiverGroupDto.DisplayName)):
                    <span class="h8 emphasis--text">@context.Value</span>
                    break;
                case (nameof(ReceiverGroupDto.Description)):
                    <span class="body regular--text">@context.Value</span>
                    break;
                case (nameof(ReceiverGroupDto.ModificationTime)):
                    <span class="body regular--text">@context.Item.ModificationTime.ToString(T("$DateTimeFormat"))</span>
                    break;
                case (nameof(ReceiverGroupDto.Modifier)):
                    <span class="body2 regular--text">@TempCurrentUserConsts.NAME</span>
                    break;
                case "Action":
                    <MIcon Small Color="emphasis2" OnClick="async()=>await _editModal.OpenModalAsync(context.Item)">mdi-pencil</MIcon>
                    break;
                default:
                    <span class="body regular--text">@context.Value</span>
                    break;
            }
        </ItemColContent>
        <FooterContent>
            <McPagination Class="mt-3 mx-6 pb-6" @bind-Page="_queryParam.Page" @bind-PageSize="_queryParam.PageSize" Total="_entities.Total" OnChange="HandlePaginationChange" />
        </FooterContent>
    </MDataTable>
</MCard>

<ReceiverGroupEditModal @ref="_editModal" OnOk="HandleOk" />
<ReceiverGroupCreateModal @ref="_createModal" OnOk="HandleOk" />

