@inherits AdminCompontentBase
@page "/channels/channelManagement"

<PageTitle>@T("Permission.ChannelManagement")</PageTitle>

<MCard Class="full-height">
    <MCardTitle class="mx-2 pt-6">
        <MTextField @bind-Value="_queryParam.Filter" Clearable Color="primary" Class="rounded-2 search" Placeholder="@T("Search")" HideDetails="@("auto")" Flat Dense Solo BackgroundColor="fill-lighten-1" OnKeyDown="SearchKeyDown" OnClearClick="HandleClearAsync">
            <PrependInnerContent>
                <MIcon Size=16 Class="mr-2 neutral-lighten-1--text">mdi-magnify</MIcon>
            </PrependInnerContent>
        </MTextField>
    </MCardTitle>
    <MCardText>
        <MRow>
            @foreach (var _entitie in _entities.Result)
            {
                <MCol Md="3">
                    <ChannelCard Height="200" Channel="_entitie" OnEditClick="async()=>await _editModal.OpenModalAsync(_entitie)" />
                </MCol>
            }
            <MCol Md="3">
                <MCard Outlined class="d-flex justify-center align-center" Style="border-style: dashed;" Height="200">
                    <MButton Class="text-h6" Ripple=false Plain OnClick="()=> _createModal.OpenModalAsync()"><MIcon Size="28" Left>mdi-plus</MIcon>@T("Permission.CreateChannel")</MButton>
                </MCard>
            </MCol>
        </MRow>
        <McPagination Class="mt-5" @bind-Page="_queryParam.Page" @bind-PageSize="_queryParam.PageSize" Total="_entities.Total" OnChange="HandlePaginationChange" />
    </MCardText>
</MCard>

<ChannelEditModal @ref="_editModal" OnOk="HandleOk"/>
<ChannelCreateModal @ref="_createModal" OnOk="HandleOk"/>

